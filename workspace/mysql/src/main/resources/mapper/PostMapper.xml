<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.mysql.mapper.PostMapper">
        <insert id="addPost">
                insert into tbl_post (post_title, post_content, member_id)
                values (#{postTitle},#{postContent},#{memberId});
        </insert>

        <select id="selectById">
                select p.id, p.post_title, p.post_content, p.post_read_count, p.member_id, m.member_name
                from tbl_post p join tbl_member m on p.member_id=m.id
                where p.id = #{PostId}
        </select>
        <update id="updatePost">
        update tbl_post p
        join tbl_member m ON p.member_id = m.id
                set p.post_title = #{postTitle}, p.post_content = #{postContent} ,p.updated_date=CURRENT_TIMESTAMP
                where m.id = #{memberId}
                and m.member_password = #{memberPassword}
        </update>
        <delete id="deletePostbyMemberId">
                DELETE FROM tbl_post
                WHERE id = #{postId}
        </delete>
        <select id="findAllPosts">
                select *
                from tbl_member
        </select>

</mapper>